<md-card>
    <md-card-header id='personal-header'>
        <div>{{'Personal_Data_Section' | translate}}</div>
        <md-icon color='accent'>account_circle</md-icon>
    </md-card-header>
    <md-card-content>
        <md-error class='header-error' *ngIf='errorMessage'>{{errorMessage | translate}}</md-error>
        <form *ngIf='!submitted' id='personal-form' [formGroup]='personalFormControl' (ngSubmit)='save()'
              #personalForm='ngForm'>
            <md-grid-list id='personal-grid' cols='2' rowHeight="4:1">

                <!-- Login -->
                <md-grid-tile colspan='1'>
                    <md-form-field>
                        <input mdInput formControlName='validName' type='text' placeholder="{{'Login' | translate}}"
                               required
                               [(ngModel)]='currentUser.username' name='currentUser.username'>
                        <md-error *ngIf='personalFormControl.controls["validName"].errors?.required'>
                            {{'Login_is_required' | translate}}
                        </md-error>
                        <md-error *ngIf='personalFormControl.controls["validName"].errors?.minlength'>
                            {{'Min_Length' | translate}}
                        </md-error>
                    </md-form-field>
                </md-grid-tile>

                <!-- First name -->
                <md-grid-tile colspan='1'>
                    <md-form-field>
                        <input mdInput formControlName='validFirstName' type='text' type='text'
                               placeholder="{{'First_name' | translate}}"
                               [(ngModel)]='currentUser.firstName'>
                        <md-error *ngIf='personalFormControl.controls["validFirstName"].errors?.minlength'>
                            {{'Min_Length' | translate}}
                        </md-error>
                    </md-form-field>
                </md-grid-tile>

                <!-- Password -->
                <md-grid-tile colspan='1'>
                    <md-form-field>
                        <input mdInput formControlName='validPassword' type='password' placeholder="{{'Password' | translate}}"
                               required
                               [(ngModel)]='currentUser.password' name='currentUser.password'>
                        <md-error *ngIf='personalFormControl.controls["validPassword"].errors?.required'>
                            {{'Password_is_required' | translate}}
                        </md-error>
                        <md-error *ngIf='personalFormControl.controls["validPassword"].errors?.minlength'>
                            {{'Min_Length' | translate}}
                        </md-error>
                    </md-form-field>
                </md-grid-tile>

                <!-- Last name -->
                <md-grid-tile colspan='1'>
                    <md-form-field>
                        <input mdInput type='text' formControlName='validLastName' placeholder="{{'Last_name' | translate}}"
                               [(ngModel)]='currentUser.lastName'>
                        <md-error *ngIf='personalFormControl.controls["validLastName"].errors?.minlength'>
                            {{'Min_Length' | translate}}
                        </md-error>
                    </md-form-field>
                </md-grid-tile>

                <md-grid-tile colspan='1'>
                    <button md-raised-button color='accent' type='submit' [disabled]='!personalForm.form.valid'
                            (click)='save()'>
                        {{'Change_Personal_Information' | translate}}
                    </button>
                </md-grid-tile>

                <!-- Email -->
                <md-grid-tile>
                    <md-form-field colspan='1'>
                        <input mdInput formControlName='validEmail' type='email' placeholder="{{'Email' | translate}}"
                               [(ngModel)]='currentUser.email'>
                        <md-error *ngIf='personalFormControl.controls["validEmail"].errors?.pattern'>
                            {{'Invalid_email_address' | translate}}
                        </md-error>
                    </md-form-field>
                </md-grid-tile>

            </md-grid-list>
        </form>
        <div class='spinner'>
            <md-spinner *ngIf='submitted' mode='indeterminate'></md-spinner>
        </div>
    </md-card-content>

    <md-card-footer class='mat-action-row'>
        <button md-raised-button color='primary' (click)='obtainUser()'>
            {{'Obtain_Personal_Information' | translate}}
        </button>
    </md-card-footer>
</md-card>